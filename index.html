<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
<div id = 'control'>
	<input type="" name="" placeholder="Скорость">
	<input type="Button" name="" value="Моделирование" onclick="moddeling()">
</div>
<canvas id = 'ca'></canvas>
<script type="text/javascript">
	var c,w,h,canvas,
	x0, y0, a = 45, v0 = 99.03, sectors = [];


	window.onload = function(){
		document.getElementById('ca').width = window.innerWidth;
		document.getElementById('ca').height = window.innerHeight;
		canvas = document.getElementById('ca');
		w = canvas.width;
		h = canvas.height;
		x0 = 100;
		y0 = h-100;
		c = canvas.getContext('2d');
		start();
	}

	function start(){
		line(x0,x0,x0,y0,'blue');
		line(x0,y0,w-x0,y0,'red');
		var r = 0;
		for(var x = x0; x < w-x0; x+=50){
			text(x,y0+20,r);
			if(x!=x0) line(x,y0-5,x,y0+5);
			r+=50;
			sectors.push({s:x-x0,count:0});
		}
		text(w-x0+20,y0+5,'X(м)');
		text(x0,x0-10,'Y(м)');
		rect(x0,y0,40,10,'fill',-a/180*Math.PI);
		moddeling();
	}


	function moddeling(){
		var sigm = 1;
		var sum = 0;
		var po = [];
		for(var i = 0; i < 1000; ++i){
			sum = 0;
			for(var k = 0; k < 1000; ++k) sum += Math.random();
				S = (sum - 500) * 15 + 1000;
			v0 = Math.sqrt((9.80665 * S) / Math.sin(2*toRad(a)));
			po = [];
			for(var t = 0; t < 50; t+=0.5){
				var x = x0 + (v0 * Math.cos(toRad(a))) * t;
				var y = y0 + ((v0 * Math.sin(toRad(a))) * t - ((9.80665 * t * t) / 2)) * -1;
				po.push({x:x,y:y});
				if(y > y0) {
					for(var j = 0; j < sectors.length-1; ++j){
						if(x-x0 >= sectors[j].s && x-x0 < sectors[j+1].s){
							sectors[j].count++;
						}
					}
					break;
				}
			}
			for(var q = 0; q < po.length-1; ++q){
				line(po[q].x,po[q].y, po[q+1].x, po[q+1].y,'black',0.1);
			}
		}




		for(var i = 0; i < sectors.length; ++i){
			var y = y0;
			for(var j = 0; j < sectors[i].count; ++j){
				rect(sectors[i].s+x0+5,y,40,-1,'fill');
				y-=2;
			}
		}

	}


	function line(x,y,x1,y1,color = 'black',w = 1, dash = [0]){
		c.beginPath();
		c.lineWidth = w;
		c.strokeStyle = color;
		c.setLineDash(dash)
		c.moveTo(x,y);
		c.lineTo(x1,y1);
		c.stroke();
		c.closePath();
	}

	function arc(x,y,r,color = 'black'){
		c.beginPath();
		c.fillStyle = color;
		c.arc(x,y,r,0,Math.PI * 2, false);
		c.fill();
		c.closePath();
	}


	function text(x,y,text,color = 'black',align = 'center', baseLine = 'bottom'){
		c.beginPath();
		c.fillStyle = color;
		c.textAlign = align;
		c.textBaseLine = baseLine;
		c.font = '15px Tahoma';
		c.fillText(text,x,y);
		c.closePath();
	}


	function rect(x,y,w,h,type,a = 0,color = 'black'){
		c.beginPath();
		if(a != 0)c.translate(x0,y0);
		c.rotate(a);
		if(type == 'fill') {
			c.fillStyle = color;
			if(a != 0)c.fillRect(-w/2,-h/2,w,h); else c.fillRect(x,y,w,h);

		}
		c.rotate(-a);	
		if(a != 0)c.translate(-x0,-y0);
		
		c.closePath();

	}

	function toRad(a){ return a * Math.PI / 180; }
</script>
<style type="text/css">
	*{
		margin: 0px;
		padding: 0px;
		overflow: hidden;
	}

	#ca{
		z-index: 1;
	}

	#control{
		width:200px;
		height: 200px;
		border:1px solid #000;
		position: absolute;
		z-index: 999;
		left:150px;
		top:50px;

	}

	#control input{
		display: block;
		width:100%;
		margin-bottom: 20px;
	}
</style>